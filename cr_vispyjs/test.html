<html>
<head>
    <title>vispy.js</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">

    <!-- JAVASCRIPT UTILS -->
    
    <script language="javascript" type="text/javascript" src="jquery-1.11.1.min.js"></script>
    <script language="javascript" type="text/javascript" src="jquery.mousewheel.min.js"></script>
    
    <script language="javascript" type="text/javascript" src="vispy.js"></script>
    
    <script type="text/javascript">
    
    function start() {
        $.getJSON( "test2.json", function(gloo_export) {
            var c = document.getElementById('vispy-canvas');
            init_gl(c);
            init_app(c);
            var n = new navigation();
            
            create_scene(c, gloo_export);
            
            c.on_mouse_wheel = function(e) {
                var pos = normalize_pos(c, e.pos);
                n.zoom([e.delta[1]*.1, e.delta[1]*.1], pos);
                c.program.set_data('u_pan', [n.tx, n.ty]);
                c.program.set_data('u_scale', [n.sx, n.sy]);
                c.update();
            }
            
        });
    }

    </script>
</head>
<body onload="start();">
    <canvas id="vispy-canvas" tabindex="1" width="800" height="600"></canvas>
</body>
</html>